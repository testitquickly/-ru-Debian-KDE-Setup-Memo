Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2022-03-17T22:14:56+02:00

====== flatpak ======

@TODO

В Debian можно устанавливать приложения из общего репозитория (центра). Иногда надо/чешется установить софт, которого в репозиториях ПО РЯДУ ПРИЧИН нет. Такой софт раздают/ставят в виде отдельных файлов DEB (или RPM).

При установке каждого пакета проверяются зависимости от других пакетов. Иногда они удовлетворяются незаметно для пользователя, иногда нет. Иногда это проблема. Иной софт вообще был разработан в одной ОС, и ставить его в другие невозможно или возможно, но не стоит. Лучше и проще поставить такой софт в частично изолированной среде, что позволит не тянуть в систему новые зависимости пакетов (или тянуть их минимально), что иногда круто.

Есть несколько подобных решений, их называют «universal package system»:

	Snap (делают Canonical)
	Flatpak
	AppImage

С точки зрения системы этот софт не устанавливается, но запускается. Иногда этого исчерпывающе и надолго достаточно.

Flatpak — кросс-платформенный фреймворк для запуска ПО без его установки в систему.

Установка flatpak в Debian

sudo apt install flatpak

	Можно подключиться к official PPA Flatpak, чтобы автоматически подтягивались его обновления:

	sudo add-apt-repository ppa:alexlarsson/flatpak
	sudo apt update
	sudo apt install flatpak

С этого момента можно устанавливать любой софт с https://flathub.org/home — скачивается в виде файла .flatpakref

Добавить репозиторий Flatpak

flatpak remote-add --if-not-exists flathub https://flathub.org/repo/flathub.flatpakrepo

Обновление Flatpak

flatpak update

После этого можно искать софт в терминале, как через aptitude. Обратить внимание, что софт можно искать довольно безалаберно, без жесткой точности в названии, но устанавливать можно только с повышенной точностью к именам, точнее, к 'ApplicationID'.

flatpak search APPLICATION_NAME

Установка софта через Flatpak — из файла .flatpackref

Можно даблкликом — откроется Apper и всё поставит.

Можно через терминал:

flatpak install YOUR_FILE.flatpackref

Установленный софт будет доступен в общем меню, что незаметно удобно.

Установка софта через Flatpak — из репозиториев

flatpak install <remotes> <ApplicationID>

Имя "Удаленные репозитории" почти всегда flathub, но бывают нюансы, это зависит от решения разработчиков каждого софта по-отдельности.

Установка из флэтхаба

flatpak install flathub org.libreoffice.LibreOffice

	Установка со стороны спотифая

	flatpak install --from https://flathub.org/repo/appstream/...ient.flatpakref

Если идём по пути скачать .flatpakref на хдд, тогда все проще:

flatpak install <ApplicationID>.flatpakref

Запуск ПО из Flatpak

flatpak run <ApplicationID>

	Пример с клиентом для спотифая:

	flatpak run com.spotify.Client

Починить вероятные проблемы при установке ПО

Если возникают "error: runtime/org.freedesktop.Platform/x86_64/1.6 not installed", то возможное решение:

flatpak update -v

Посмотреть список всего софта флэтпэк в системе

flatpak list

===== Удаление Flatpak app =====

flatpak uninstall <ApplicationID>

	Пример:
	flatpak uninstall com.spotify.Client

==== Удаление неиспользуемых флэтпэк-приложений ====

Применять осторожно.

flatpak uninstall --unused


Если viber или любой другой софт запускается через flatpak из в [[/var/lib/flatpak/exports/share/applications,]] тогда надо добавить указание про QT_SCALE_FACTOR в ярлык запуска. 

==== Где найти место запуска ====

В меню программ правый клик по нужному ПО, глянуть путь вызова к файлу .desktop

=== Открыть его на редактирование ===

''sudo mcedit /var/lib/flatpak/app/org.zim_wiki.Zim/current/active/export/share/applications/org.zim_wiki.Zim.desktop''

Найти в этом файле место вызова. Обычно оно в разделе [Desktop Entry], но там может быть несколько точек — посмотреть весь файл внимательно. 

	Всякие переводы подсказок на другие языки можно (АККУРАТНО!) удалить.

И оно обязательно должно быть добавлено ДО вызова ПО (пример для viber):

''flatpak override --user ''**''--env="QT_SCALE_FACTOR=1.25"''**'' com.viber.Viber''

Может быть и так (пример для zim):

''/usr/bin/flatpak run --branch=stable --arch=x86_64 --command=zim --file-forwarding --env="QT_SCALE_FACTOR=1.25" ''**''org.zim_wiki.Zim''**

Другой софт может запускаться так

''QT_AUTO_SCREEN_SCALE_FACTOR=0 QT_SCREEN_SCALE_FACTORS=2 QT_SCALE_FACTOR=1  flatpak run org.jaspstats.JASP''

===== Где хранятся настройки =====
~/.var/app

smplayer.ini 
--------------------
@flatpak @console 
