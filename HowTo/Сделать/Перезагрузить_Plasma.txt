Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2023-02-05T22:35:25+02:00

====== Перезагрузить Plasma ======

[ @plasma @kde ]

Полезно в случае мелких глюков (добавил новую панель на рабочий стол, добавил на новую панель ярлык на какой-то софт, добавил второй, а он переместился поверх предыдущего ярлыка и уже непонятно, добавился ли новый ярлык). 

В принципе, весь запущенный софт (кроме виджетов Plasma) должен остаться в рабочем состоянии. Но тот же Zim после этого выключается.

===== Узнать действующую версию Plasma =====

''kinfocenter --version''

===== Вариант 1 =====

Выполнить в Konsole:

''systemctl --user restart plasma-plasmashell''

Недостатки — сервис может самостоятельно остановиться, если вызывать его слишком часто. Поэтому метод хорош, если надо выполнить перезагрузку Plasma один раз.

===== Вариант 2 =====

''plasmashell --replace''

Условный недостаток: в Konsole будет выведен весь лог запуска Plasma. Может быть полезно для отслеживания того, что и как запускается, но если вкладку (или всё окно) Konsole, в которой это всё выполняется, то вся Plasma рухнет. Поэтому надо будет оставить окно Konsole работать где-нибудь в фоне.

Любопытно, что если выполнить эту команду в одной вкладке Konsole, затем во второй, то вся активность переместится во вторую вкладку, а в первой всё выполнение прекратится, её даже можно будет закрыть.  

===== Вариант 3 =====

Сперва надо убить весь процесс plasmashell, затем запустить его с нуля.

1. ''killall plasmashell //'' подождать, пока KDE не закроется
2. ''kstart plasmashell //'' подождать, пока KDE полностью  восстановится

Можно скомбинировать эти команды с дополнительным прихлопыванием других штук (не факт, что они будут) и смешать с явной паузой:

''killall plasmashell desktop.so file.so ; sleep 5 ; kwin --replace ; sleep 5 ; kstart plasmashell''

После этого в консоли будет IRL отображаться всё, что происходит с Plasma. Какое-то время это не будет мешать, но память будет понемного уходить. Можно нажать в консоли  ''Ctrl+C'' — и предполагать, что Plasma продолжит работать и окно Konsole можно безопасно закрыть. 

Или нет.
