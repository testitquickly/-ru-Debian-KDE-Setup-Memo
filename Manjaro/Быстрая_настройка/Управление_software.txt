Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2023-01-07T01:18:16+02:00

@manjaro @console @pacman @pamac @yay 
--------------------

====== Управление software ======

===== pacman =====

Основной консольный package manager дистрибутива Arch Linux. Название происходит от англ. “PACkage MANager”.

==== Поиск пакета ====

=== … в репозиториях ===

''sudo pacman -Ss audacity''

=== … в репозиториях по регулярному выражению ===

''sudo pacman -Ss ^audacity''

=== … в установленной системе ===

''sudo pacman -Qs audacity''

==== Запросить описание пакета ====

''sudo'' ''pacman -Sii audacity''

==== Установить пакет ====

''sudo pacman -S audacity''

==== Удалить пакет ====

=== … без удаления зависимостей ===

''sudo pacman -R audacity''

=== … и его конфигурационные файлы ===

''sudo pacman -Rn audacity''

=== … со всеми зависимостями ===

…которые не используются другими пакетами.

''sudo pacman -Rs audacity''

=== … с зависимостями и конфигурационными файлами ===

''sudo'' ''pacman -Rsn audacity''

=== … игнорируя предупреждение о зависимостях ===

''sudo'' ''pacman -Rdd texlive-core''

Такое надо делать на очень трезвую голову.

==== Показать список установленных пакетов ====

=== … с указанием версий ===

''sudo'' ''pacman -Qe''

=== … без указания версий ===

''sudo'' ''pacman -Qqe''

==== Обновление ====

=== … баз данных пакетов ===

''sudo'' ''pacman -Sy''

=== … всей системы ===

''sudo'' ''pacman -Su''

=== … баз данных пакетов и системы ===

''sudo'' ''pacman -Syu''

==== Показать пакеты-сироты ====

=== … с указанием версий ===

''sudo'' ''pacman -Qdt''

=== … без указания версий ===

''sudo'' ''pacman -Qdtq''

=== Удаление всех пакетов-сирот ===

''sudo'' ''pacman -Qqdt'' 

или

''sudo'' ''pacman -Rsn''

==== Очистка кэша ====

=== … установленных пакетов ===

''sudo'' ''pacman -Scc''

=== … неустановленных пакетов ===

''sudo'' ''pacman -Sc''

===== Pamac =====

Это одновременно и GUI, и консольный package manager, который соединен и c репозиторием Manjaro, и с AUR, Flatpak и Snaps. Команды в нём более человекопонятные:

* ''sudo pamac search audacity''
* ''sudo pamac install audacity''
* ''sudo pamac remove audacity''
* ''sudo pamac upgrade''

Однако pamac более требователен к подтверждению установки. В ответ на вопрос

''Применить транзакцию ? [д/Н]''

недостаточно просто нажать Enter, всегда надо набирать на клавиатуре “''y''”, и затем “''Enter''”. Если просто нажать ввод, установка ПО прекратится. 

В консоли может быть более разумным юзать только pacman, а pamac будет по-умолчанию использоваться, когда ПО будет устанавливаться из gui-ного «Установка и удаление программ». 

==== Выбор зависимостей в pamac ====

В GUI выбор установки необязательных зависимостей делается кликами мыши. В консоли выбор надо перечислять цифрами через запятую.

Пример при установке Krusader: 

'''
Выберите необязательные зависимости для krusader:
1:  lhasa: LHA archive support
2:  cpio: cpio archive support
3:  unrar: RAR decompression support
4:  arj: ARJ archive support
5:  unarj: ARJ decompression support
6:  unace: ACE decompression support
7:  kompare: file contents comparison
8:  kdiff3: file contents comparison
9:  krename: advanced rename tool
'''

Перечисляю нужные (мне нужны все):

''Укажите ваш выбор (по умолчанию=нет): 1,2,3,4,5,6,7,8,9''

===== yay =====

Это 'pacman wrapper and AUR helper, written in go'. Его можно установить из Pamac, но это не наш путь. 

Читается как «ийей» и переводится как «Yet another Yogurt».

==== Снять исходники из репозитория AUR ====

''sudo pacman -S --needed --noconfirm base-devel git''

Установим его сразу в /opt

''sudo git clone'' [[https://aur.archlinux.org/yay-git.git|''https://aur.archlinux.org/yay-git.git'']] ''/opt/''

И укажем права каталогу

''chmod 777 /opt/yay''

==== Собрать yay ====

Перейти в каталог с yay

''cd /opt/yay-git''

И выполнить

''sudo makepkg -si''

Если всё будет ок, то Package management helper 'yay' установлен. 

Теперь в системе будет два вида софта: установленные через общий механизм и установленные через yay. Их следует обновлять по-отдельности. Например, у меня через yay установлены

	6 python-anytree
	5 cython2
	4 zoom
	3 docker-desktop
	2 sublime-text-4
	1 wxgtk2.8

Обновлять этот софт надо отдельно.

==== Установить софт через yay ====

''yay -S названиеПакета''

==== Обновить софт через yay ====

Запускать обновление через sudo не надо, запуск 'makepkg' от имени суперпользователя не разрешён, т. к. это может причинить катастрофический вред системе.

''yay''

или 

''yay -Syu''

Читать внимательно каждый вопрос и принимать решение.

==== Удалить софт через yay ====

Просто что-то удалить:

''yay -R названиеПакета''

Удалить и пакет, и зависимости:

''yay -Rns названиеПакета''

Удалить все пакеты, которые системе «не нужны» (осторожно!):
 
''yay -Yc''
 
