Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2023-12-15T02:06:59+02:00

====== Как сделать symlink ======

[ @debian @symlink ]

symlink — сокращение от „symbolic link”. 

При редактировании симлинка происходит редактирование оригинального файла, на который ссылается симлинк. 

При удалении симлинка оригинальный файл остаётся на месте.

Также см. [[Как сделать hardlink]]

Если нет нужды делать симлинки, которые нужны множеству пользователей (я и мой ноутбук), то лучше использовать алиасы в файле .bashrc — они будут работать по тому же принципу, но всегда можно будет прочитать файл „~/.bashrc” и увидеть/отредактировать их список и местонахождение файлов, на которые они ссылаются. Также это упрощает жизнь при переустановке системы. См. [[Как сделать alias]]

===== Объяснение =====

В Linux можно запускать любой скрипт в консоли из любого каталога как обычную команду, если сделать на нужный скрипт симлинк в каталоге с бинарниками.

Например, я собрал последовательнось команд для обновления Debian и положил его в файл „''/home/mySettings/myScripts/debian/debian_update_and_upgrade.sh''”. 

	Сделал скрипт.

В консоли можно запустить этот скрипт так:

''/home/mySettings/myScripts/debian/debian_update_and_upgrade.sh''

Или сперва зайти в каталог с файлом

''cd /home/mySettings/myScripts/debian/''

и уже оттуда его запустить:

''./debian_update_and_upgrade.sh'' 

А ещё можно сделать символическую ссылку на этот файл, положить её в какой-то каталог «внутри профиля пользователя» и вызывать её в консоли как отдельную команду. 

	Или сделать симлинк доступным для всех пользователей на компьютере (разумно, когда сервер).

У симлинка может быть любое имя, отличное от оригинального файла, и иногда это приносит дополнительное удобство. Например, оригинал будет называться „debian_update_and_upgrade.sh”, а симлинк можно называть очень сокращенно, например, „''debup''” — расширение для файла в этом случае вообще не имеет значения.

	Или „''updeb''”.
	Или „''dp''”.
	Или „''updatemazafaka''”.
	Или все сразу.

===== Создать и сразу переименовать симлинк одной командой =====

''cd ~/.local/bin/ && ln -s /home/mySettings/myScripts/debian/debian_update_and_upgrade.sh && mv debian_update_and_upgrade.sh debup''

===== Проверить симлинк =====

''ls -l debup''

Ожидаем ответ такого вида:

''lrwxrwxrwx 1 [UserName> [UserGroup> 62 дек 15 03:21 debup -> /home/mySettings/myScripts/debian/debian_update_and_upgrade.sh''

Читается так: 
	* права доступа
	* количество симлинков на исходный файл
	* автор
	* группа автора
	* размер файла
	* время создания
	* имя (симлинка)
	* путь к файлу, на который этот симлинк указывает

===== Превратить симлинк в команду в консоли =====

Можно пройти далее и положить этот симлинк в файл с бинарниками, которые учитывает система.

	* Если нужно, чтобы симлинк был доступен для всех пользователей в системе, его надо положить в „''/usr/local/bin/''” (или даже в „''/usr/bin''”, но туда лучше не лезть).
	* Если нужно, чтобы симлинк был доступен только для действующего пользователя, его надо положить в „''~/.local/bin/''”.

После этого в консоли (находясь в любом каталоге) можно набрать эту уникальную команду „''updeb''” и нажать Enter — так, словно в консоли была вызвана обычная линуксовая команда.

	Собственно, я только что сделал новую команду в Linux, и за это мне полагается большая круглая медаль «За передовую технологическую магию».

Перед тем как создавать «новую крутую короткую команду», рекомендуется проверить, нет ли аналогичной команды в системе:

''man debup''

Если появится справочная страница — перепродумать название своего нового симлинка. Выход из справки по клавише „q”,

===== Положить линк на скрипт в «Меню приложений» =====

Не надо все скрипты пихать в приложения, ведь их место в консоли. Но если очень хочется, то можно.

''mcedit ~/.local/share/applications/ИмяФайла.desktop''

Отредактировать „ИмяФайла.desktop”:

''[Desktop Entry]''
''Encoding=UTF-8''
''Name= Название новой программы''
''Comment= Если нужно''
''Type=Application''
''Terminal=true''
''Exec=~/.local/bin/МойСимЛинк''
''StartupNotify=true''
''Categories=System;''

Новая иконка появится в Меню приложений > Система.

Если надо сделать «новое приложение» доступным для всех пользователей в системе, файл „ИмяФайла.desktop” надо через „''sudo''” положить в  каталог „''/usr/share/applications/''”.
