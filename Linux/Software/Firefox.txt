Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2022-02-22T15:11:56+02:00

====== Firefox ======

< @firefox @install @symlink >

По-умолчанию его нет в репозиториях Debian, вместо него существует Firefox ESR (Extended support release). Можно его использовать, но он всегда более старый, нежели новейший браузер, поэтому его можно удалить через Apper или Discover, а можно и оставить, он не мешает.

===== Скачать архив с установкой =====

с https://www.mozilla.org/ru/firefox/new/ 

Обычно он раздаётся в виде файла „''firefox-x.x.xx.tar.bz2''”

===== Распаковать архив =====
'''

tar -jxvf firefox*.tar.bz2
'''

Появляется каталог „firefox” с файлами браузера внутри. 

===== Переместить файлы в /opt =====

Разумно держать весь «сторонний» софт в одном месте, поэтому  

''sudo mv /firefox /opt''

===== Дать права своему пользователю на изменения в каталоге /opt/firefox =====

'''
sudo chown -R astenix:sudo /opt/firefox

sudo chmod 750 /opt/firefox
'''

==== Сделать symbolic link на firefox ====

Это инструкция для установки нового Firefox только для своего пользователя на ноутбуке.

''cd ~/.local/bin/ && ln -s /opt/firefox/firefox''

=== Сделать symbolic link на firefox — для всех пользователей ===

Это инструкция для установки нового Firefox для всех пользователей на ноутбуке.

Проверить, что в ''/usr/bin/'' нет файла для запуска firefox:

'''
ls /usr/bin/firefox
'''

Если есть — его надо удалить:

'''
sudo rm /usr/bin/firefox
'''

Создать новый симлинк:

''cd /usr/bin/ && ln -s /opt/firefox/firefox''

==== Сделать ярлык для запуска ====

Скачать из сети картинку логотипа файл условно "firefox.png". Размер любой, но понадобится не больше 62 пикселей, поэтому громадные картинки не нужны.

Положить его куда-нибудь, где он будет находиться постоянно. Возможно, каталог [[/opt/firefox/icons/]] для этого лучшее решение (создать, если таковой отсутствует).

''sudo mv firefox.png /opt/firefox/icons/''

=== Создать файл „firefox.desktop” ===

Положить его куда-нибудь, где его ничего не тронет.

''mkdir ~/.local/applications/''

''mcedit ~/.local/applications/firefox.desktop''

Вставить в него такой набор букв:

**[Desktop Entry]**
'''
Encoding=UTF-8
Name=Firefox
Comment=from /otp
Type=Application
Terminal=false
Exec=/opt/firefox/firefox %U
Icon=/opt/firefox/icons/firefox.png
StartupNotify=true
Categories=Network;WebBrowser;
'''

[F2] [Esc] [Esc]

=== Сделать ярлык для запуска — для всех пользователей ===

Для этого “As a root” надо будет создать файл ''firefox.desktop'' в ''/usr/share/applications/'':

'''
sudo touch /usr/share/applications/firefox.desktop
'''

		Если нужен ярлык только для одного юзера, то можно сразу создать его в ''/~/.local/share/applications''

==== Запустить браузер из консоли ====

Так можно сразу распознать вероятные проблемы. 

Я запускаю его с диалогом выбора профиля. В принципе он должен загрузиться с профилем по-умолчанию, но у меня уже есть сохраненные профили и запускать «голый» браузер мне незачем:

''/opt/firefox/firefox -p''

Добавить профили, запустить.

Вероятные проблемы:

	XPCOMGlueLoad error for file /opt/firefox/libxul.so:
	libdbus-glib-1.so.2: cannot open shared object file: No such file or directory
	Couldn't load XPCOM.

		Лечение: ''sudo aptitude install libdbus-glib-1-2''
	или 

	./firefox: error while loading shared libraries: libstdc++.so.6: cannot open shared object file: No such file or directory
	Chances are that you are trying to install the 32 bit version of firefox in a 64 bit Debian environment.
	You should probably install '''apt install ia32-libs ia32-libs-gtk'''

	Установить нужные компоненты.

Когда запустится:
1. Зайти в свой аккаунт Firefox, если есть
2. Проверить, что “automatic updates are enabled”.
3. Закрыть браузер и проверить, что он запускается через ярлык из меню приложений (он должен появиться в раздел Интернет).

Установить spellchecker для румынского (или любого другого нужного) языка:
	https://addons.mozilla.org/ru/firefox/addon/romanian-spellchecking-diction/

===== Установить новую версию браузера =====

Сперва удалить существующие файлы:

'''
# rm -rf /opt/firefox*
# rm /usr/bin/firefox
'''

Затем устанавливать новое.

===== Бэкап профиля =====

Проверить в настройках браузера, какой именно профиль используется:

	1. в строке поиска ''about:profiles''
	2. профилей может быть несколько, один из них помечен как «Профиль по умолчанию = Да».

По-умолчанию профили создаются и хранятся в ''/~/.mozilla/firefox/,'' но всегда есть возможность выбора места хранения.

Рекомендуется регулярно бэкапить содержимое ''/~/.mozilla/firefox/''

===== Общая настройка Firefox =====

==== Отдельные профили в Firefox ====

[[+Профили в Firefox]]

==== Импорт существующего профиля из бэкапа ====

Открыть страницу ''about:support''

1. Найти «Каталог профиля». 
2. Выключить браузер.
3. Забэкапить содержимое каталога профиля в zip.
4. Очистить каталог профиля.
5. Закатать в него содержимое каталога профиля из бэкапа
6. Включить браузер и убедиться в том, что всё ок.
7. Почистить кэш браузера полностью, там не меньше гигабайта может освободиться.

==== Запретить Firefox предзагружать страницы в фоне ====

В теории возникает ощущение ускорения загрузки страниц, а на практике это не нужно.

1. about:config
2. network.prefetch-next 
3. = **false**

==== Как открывать каталог с загруженным файлом в Firefox через Dolphin ====

Если по-умолчанию каталог со скачанным файлом открывается через Konqueror — выполнить в терминале:
	
''xdg-mime default kde4-dolphin.desktop inode/directory''

Изменения подтянутся сразу же, но лучше сделать релогин.

==== Расширение для тёмной темы ====

https://addons.mozilla.org/en-US/firefox/addon/dark-background-light-text/

==== Настройки шрифта ====

about:preferences#general
''> Шрифты''
''> Дополнительно''

Поставить галочку для «Разрешить веб-сайтам использовать свои шрифты вместо установленных выше». Может быть, было бы логичнее не разрешать, но тогда на разных страницах много элементов вроде стрелочек (которые разворачивают содержимое) или поля для ввода данных (вроде строки поиска) ВНЕЗАПНО отображаются как текстовые элементы:

{{../../../images/firefox_webelements.jpg}}

===== Можно (но уже не нужно) добавить flash в Firefox =====

0
убедиться в том, что в системе есть /usr/lib/mozilla/plugins/

1
Скачать с https://get.adobe.com/ru/flashplayer/ версию 'tar.gz для Linux' - flash_player_npapi_linux.x86_64.tar.gz

2
закрыть Firefox

3
''tar -xzvf flash_player_npapi_linux.x86_64.tar.gz -C flashPlayer''
// появится каталог /flashPlayer/ со всеми файлами

4
copy the flash lib to your plugin directory:
''sudo cp libflashplayer.so /usr/lib/mozilla/plugins/''

5
copy the flash local settings configuration to your /usr directory:
''sudo cp -r usr/* /usr''

6
Запустить Firefox

