Content-Type: text/x-zim-wiki
Wiki-Format: zim 0.6
Creation-Date: 2022-02-23T00:50:15+02:00

====== Обновить Debian ======

===== Проверить версию и релиз Debian =====

Здесь:
* lsb = [[https://wiki.linuxfoundation.org/lsb/start|Linux Standard Base]], a standard that describes the minimum set of APIs a distribution must support.
* lsb_release = утилита выдачи установленной на компьютере версии Linux Standard Base. Но она выдаёт общий порядковый номер, поэтому ещё считаем содержимое файла /etc/debian_version

''lsb_release -d && cat /etc/debian_version''

Пример ответа: 

	'''
	Description: Debian GNU/Linux 11 (bullseye)
	11.2
	'''

===== Дежурное обновление системы =====

''sudo apt-get update && sudo apt-get upgrade''

===== Обновление до определённого ядра =====

Сперва [[../../../Фишки_Linux/Как_узнать_какие_ядра_есть_в_системе.txt|надо знать точный номер ядра]], к которому нужно обновиться, и причина для обновления должна быть обоснована. 

	Всегда есть вероятность нафакапиться, поэтому продвигаться надо осторожно, всегда проверяя, можно ли откатиться к предыдущему состоянию. 
	
	При обновлении ядер разумно поставить их несколько совместно и явно указать в загрузке более новое. Если что — откатиться.

''sudo aptitude update'' 
	
Списки пакетов обновляются из всех репозиториев, указанных в файле /etc/apt/sources.list а также в Система > Менеджер пакетов Synaptic > Настройки > Репозитории > Other Software 

'''
sudo aptitude install some-linux-image-version
sudo reboot
'''

Если после загрузки все идёт хорошо, тогда подтягиваем зависимости для нового ядра, разрешив Debian автоматом удалять старые зависимости:

''sudo aptitude full-upgrade''

===== Обновление до нового релиза =====

Отслеживать порядковый номер и имя доступных релизов — https://www.debian.org/releases/ Я сижу на stable Debian и стараюсь не обновлять систему как можно дольше — это мой выбор. 

Когда уже точно надо обновляться — [[Обновить sources.list]] и внести туда имя нового релиза.

1. ''sudo aptitude update''
2. ''sudo aptitude upgrade''
3. ''sudo reboot''
			— и очень внимательно посмотреть, если всё норм и не хочется ли сделать шаг назад
4. ''sudo aptitude full-upgrade''

//aptitude full-upgrade// обновляет установленные пакеты до их наиболее свежих версий, удаляя или устанавливая пакеты, если это необходимо. Также выполняется установка новых необходимых и требующихся пакетов. Эта команда менее консервативна (более агрессивна) чем //safe-upgrade//, и потому более вероятно, что она произведёт нежелательные действия. Тем не менее, она способна обновить пакеты, которые не могут быть обновлены командной safe-upgrade.

Если ни один пакет не указан в командной строке, aptitude попытается обновить //каждый// пакет, который может быть обновлен. 

Команда //full-upgrade// изначально назвывалась //dist-upgrade//. aptitude все ещё распознает dist-upgrade как синоним full-upgrade.

===== Простое и бесконтрольное обновление =====

Чревато последствиями, но если не страшно:

'''
sudo apt update
sudo apt dist-upgrade
'''

===== Если обновления проверяются только из кэша =====

[[KDE:Common:HowTo:Как заставить aptitude обновляться из сети, а не из кэша]]

--------------------
@update 
